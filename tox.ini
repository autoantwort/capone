[flake8]
exclude = migrations

[tox]
install_command = pip install {opts} {packages}
indexserver =
    default = https://pypi.counsyl.com/counsyl/prod/+simple/
envlist = py27-{1.7,1.8,1.9}

[testenv]
usedevelop = True
setenv =
  XUNIT_FILE=nosetests-{envname}.xml
commands =
  {envbindir}/coverage run -p --omit="*tests*" --source=ledger --branch \
    setup.py test
basepython = python2.7
deps =
  -r{toxinidir}/requirements-dev.txt
  1.7: Django>=1.7,<1.8
  1.8: Django>=1.8,<1.9
  # TODO: `runserver` still doesn't work on 1.9
  1.9: Django>=1.9,<1.10
whitelist_externals = make
                      bash
                      coverage
                      nosetests
