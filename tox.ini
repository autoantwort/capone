[flake8]
exclude = migrations,south_migrations

[tox]
indexserver =
    default = https://pypi.counsyl.com/counsyl/prod/
downloadcache = {toxworkdir}/_download/
# envlist = py27-{1.6,1.7,1.8}
envlist = py27-{1.6,1.7}

[testenv]
commands =
  dropdb --if-exists ledger_test_db
  createdb ledger_test_db  # required by Django 1.6 for some reason
  coverage run -p --source=ledger --branch \
    ./manage.py test --settings=ledger.tests.settings \
    --with-xunit --xunit-file=nosetests-{envname}.xml
basepython = python2.7
deps =
  -r{toxinidir}/requirements.txt
  -r{toxinidir}/requirements-dev.txt
  1.6: django>=1.6,<1.7
  1.7: django>=1.7,<1.8
  # 1.8: django>=1.8,<1.9
whitelist_externals = make
                      bash
                      coverage
                      nosetests
                      dropdb
                      createdb
